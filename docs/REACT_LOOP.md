# ğŸ”„ ReAct Loop - Reasoning + Acting

## ä»€ä¹ˆæ˜¯ ReActï¼Ÿ

**ReAct** = **Rea**soning (æ¨ç†) + **Act**ing (è¡ŒåŠ¨)

è¿™æ˜¯ä¸€ç§è®© AI Agent é€šè¿‡**æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿ**å¾ªç¯æ¥è§£å†³å¤æ‚ä»»åŠ¡çš„æ¡†æ¶ã€‚

## ReAct Loop çš„æ ¸å¿ƒæ­¥éª¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Query                        â”‚
â”‚  "åˆ†æå’–å•¡åº—è¡Œä¸šçš„ä¸»è¦ç«äº‰å¯¹æ‰‹"                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: REASONING (æ¨ç†)                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  Agent æ€è€ƒ:                                         â”‚
â”‚  "è¦åˆ†æç«äº‰å¯¹æ‰‹ï¼Œæˆ‘éœ€è¦å…ˆæœç´¢ç›¸å…³ä¿¡æ¯"                â”‚
â”‚  "æˆ‘åº”è¯¥ä½¿ç”¨ competitor_research å·¥å…·"                â”‚
â”‚                                                      â”‚
â”‚  Decision: ä½¿ç”¨ competitor_research tool             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: ACTING (è¡ŒåŠ¨) - Tool Use                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  Agent è°ƒç”¨å·¥å…·:                                     â”‚
â”‚  competitorResearchTool({                            â”‚
â”‚    industry: "coffee shops",                         â”‚
â”‚    region: "US",                                     â”‚
â”‚    limit: 5                                          â”‚
â”‚  })                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: OBSERVING (è§‚å¯Ÿ)                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  Tool è¿”å›ç»“æœ:                                      â”‚
â”‚  {                                                   â”‚
â”‚    competitors: [                                    â”‚
â”‚      { name: "Starbucks", share: "40%" },          â”‚
â”‚      { name: "Dunkin", share: "25%" },             â”‚
â”‚      ...                                             â”‚
â”‚    ],                                                â”‚
â”‚    insights: [...]                                   â”‚
â”‚  }                                                   â”‚
â”‚                                                      â”‚
â”‚  Agent æ¥æ”¶å¹¶ç†è§£è¿™äº›æ•°æ®                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: REASONING (å†æ¬¡æ¨ç†)                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  Agent æ€è€ƒ:                                         â”‚
â”‚  "æˆ‘å·²ç»å¾—åˆ°äº†ç«äº‰å¯¹æ‰‹åˆ—è¡¨"                           â”‚
â”‚  "ç°åœ¨æˆ‘éœ€è¦åˆ†æå¸‚åœºè§„æ¨¡æ¥æä¾›å®Œæ•´çš„åˆ†æ"              â”‚
â”‚                                                      â”‚
â”‚  Decision: ä½¿ç”¨ market_size_research tool            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: ACTING (å†æ¬¡è¡ŒåŠ¨)                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  marketSizeResearchTool({                            â”‚
â”‚    market: "coffee shops",                           â”‚
â”‚    region: "US"                                      â”‚
â”‚  })                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: OBSERVING                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  Tool è¿”å›:                                          â”‚
â”‚  {                                                   â”‚
â”‚    marketSize: "$45.4B",                            â”‚
â”‚    growth: "5.2%",                                  â”‚
â”‚    ...                                               â”‚
â”‚  }                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 7: FINAL REASONING                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  Agent æ€è€ƒ:                                         â”‚
â”‚  "æˆ‘ç°åœ¨æœ‰äº†ç«äº‰å¯¹æ‰‹ä¿¡æ¯å’Œå¸‚åœºè§„æ¨¡æ•°æ®"                â”‚
â”‚  "æˆ‘å¯ä»¥ç”Ÿæˆå®Œæ•´çš„åˆ†ææŠ¥å‘Šäº†"                         â”‚
â”‚                                                      â”‚
â”‚  Decision: ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆï¼Œä¸éœ€è¦æ›´å¤šå·¥å…·               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Final Response                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  "åŸºäºæˆ‘çš„ç ”ç©¶ï¼Œå’–å•¡åº—è¡Œä¸šçš„ä¸»è¦ç«äº‰å¯¹æ‰‹åŒ…æ‹¬..."       â”‚
â”‚  "å¸‚åœºè§„æ¨¡ä¸º $45.4Bï¼Œå¹´å¢é•¿ç‡ 5.2%..."               â”‚
â”‚  "ä¸»è¦ç«äº‰æ ¼å±€åˆ†æ: ..."                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­çš„ä½“ç°

### 1. BaseAgent ä¸­çš„ ReAct Loop

```typescript
// src/langchain/agents/BaseAgent.ts
async invoke(input: string, context: AgentContext) {
  // LangChain çš„ createAgent å†…éƒ¨å®ç°äº† ReAct loop
  const agent = createAgent({
    model: this.config.model,
    tools: this.config.tools,        // å¯ç”¨çš„å·¥å…·
    systemPrompt: this.config.systemPrompt
  });

  // Agent ä¼šè‡ªåŠ¨æ‰§è¡Œ ReAct loop:
  // 1. è¯»å– user input
  // 2. Reasoning: å†³å®šä½¿ç”¨å“ªä¸ª tool
  // 3. Acting: è°ƒç”¨ tool
  // 4. Observing: è·å– tool ç»“æœ
  // 5. é‡å¤ 2-4 ç›´åˆ°ä»»åŠ¡å®Œæˆ
  const result = await agent.invoke({ messages });

  return result;
}
```

### 2. å®é™…æ‰§è¡Œæ—¥å¿—

è¿è¡Œ `pnpm dev` æ—¶çš„è¾“å‡ºå±•ç¤ºäº† ReAct loopï¼š

```
ğŸ¤– Agent Starting
Input: "åˆ†æå’–å•¡åº—ç«äº‰å¯¹æ‰‹"

[Iteration 1]
ğŸ’­ Reasoning: éœ€è¦ç«äº‰å¯¹æ‰‹ä¿¡æ¯
ğŸ”§ Tool Use: competitor_research({ industry: "coffee shops", region: "US" })
ğŸ“Š Observation: { competitors: [...], insights: [...] }

[Iteration 2]
ğŸ’­ Reasoning: éœ€è¦å¸‚åœºè§„æ¨¡æ•°æ®
ğŸ”§ Tool Use: market_size_research({ market: "coffee shops" })
ğŸ“Š Observation: { marketSize: "$45.4B", growth: "5.2%" }

[Final]
ğŸ’­ Reasoning: ä¿¡æ¯è¶³å¤Ÿï¼Œç”ŸæˆæŠ¥å‘Š
âœ… Response: "ä¸»è¦ç«äº‰å¯¹æ‰‹åŒ…æ‹¬..."

Total iterations: 2
Tools used: competitor_research, market_size_research
```

## Tool Use çš„å…³é”®æ¦‚å¿µ

### 1. Tool Selection (å·¥å…·é€‰æ‹©)

Agent åœ¨æ¯æ¬¡è¿­ä»£ä¸­**æ¨ç†**åº”è¯¥ä½¿ç”¨å“ªä¸ªå·¥å…·ï¼š

```typescript
// Agent çš„å†…éƒ¨æ€è€ƒè¿‡ç¨‹ï¼ˆç®€åŒ–è¡¨ç¤ºï¼‰
if (éœ€è¦ç«äº‰å¯¹æ‰‹ä¿¡æ¯) {
  ä½¿ç”¨ competitor_research tool
} else if (éœ€è¦å¸‚åœºè§„æ¨¡) {
  ä½¿ç”¨ market_size_research tool
} else if (éœ€è¦å®¢æˆ·åˆ†æ) {
  ä½¿ç”¨ customer_analysis tool
} else {
  ä¸ä½¿ç”¨å·¥å…·ï¼Œç›´æ¥å›ç­”
}
```

### 2. Tool Invocation (å·¥å…·è°ƒç”¨)

Agent æ„å»ºå·¥å…·è°ƒç”¨å‚æ•°ï¼š

```typescript
// LangChain å†…éƒ¨ç”Ÿæˆçš„ tool call
{
  toolName: "competitor_research",
  arguments: {
    industry: "coffee shops",
    region: "US",
    limit: 5
  }
}
```

### 3. Result Processing (ç»“æœå¤„ç†)

Agent æ¥æ”¶å¹¶ç†è§£å·¥å…·è¿”å›ï¼š

```typescript
// Tool è¿”å›
{
  competitors: [...],
  insights: [...]
}

// Agent å°†è¿™ä¸ªç»“æœåŠ å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­
// ç”¨äºä¸‹ä¸€è½®æ¨ç†
```

## å¹¶è¡Œ Tool Use

Agent å¯ä»¥åœ¨ä¸€æ¬¡è¿­ä»£ä¸­è°ƒç”¨å¤šä¸ªå·¥å…·ï¼ˆå¦‚æœå®ƒä»¬äº’ä¸ä¾èµ–ï¼‰ï¼š

```
User: "åˆ†æè¿™ä¸ªåˆ›ä¸š idea çš„ç«äº‰å¯¹æ‰‹å’Œç›®æ ‡å®¢æˆ·"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Reasoning:                         â”‚
â”‚  éœ€è¦ä¸¤ä¸ªç‹¬ç«‹çš„ä¿¡æ¯:                  â”‚
â”‚  1. ç«äº‰å¯¹æ‰‹ (competitor tool)       â”‚
â”‚  2. ç›®æ ‡å®¢æˆ· (customer tool)         â”‚
â”‚  è¿™ä¸¤ä¸ªå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tool 1  â”‚           â”‚ Tool 2  â”‚
â”‚ competi â”‚  å¹¶è¡Œæ‰§è¡Œ  â”‚ customerâ”‚
â”‚ tor     â”‚           â”‚ analysisâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“                       â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ åˆå¹¶ä¸¤ä¸ªå·¥å…·çš„ç»“æœ    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç”Ÿæˆç»¼åˆåˆ†æ          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

åœ¨ä»£ç ä¸­ï¼š

```typescript
// Agent ä¼šè‡ªåŠ¨è¯†åˆ«å¯ä»¥å¹¶è¡Œçš„å·¥å…·è°ƒç”¨
const result = await agent.execute(
  "åˆ†æç«äº‰å¯¹æ‰‹å’Œç›®æ ‡å®¢æˆ·",
  context
);

// LangChain å†…éƒ¨å¯èƒ½ç”Ÿæˆ:
[
  { tool: "competitor_research", args: {...} },
  { tool: "customer_analysis", args: {...} }
]
// è¿™ä¸¤ä¸ªä¼šå¹¶è¡Œæ‰§è¡Œ
```

## ReAct vs ä¼ ç»Ÿæ–¹æ³•

### âŒ ä¼ ç»Ÿæ–¹æ³•ï¼ˆæ—  ReActï¼‰

```typescript
// å›ºå®šæµç¨‹ï¼Œæ— æ³•é€‚åº”
function analyze(query) {
  const competitors = getCompetitors();  // æ€»æ˜¯æ‰§è¡Œ
  const marketSize = getMarketSize();    // æ€»æ˜¯æ‰§è¡Œ
  const customers = getCustomers();      // æ€»æ˜¯æ‰§è¡Œ

  return generateReport(competitors, marketSize, customers);
}
```

**é—®é¢˜ï¼š**
- æ— æ³•æ ¹æ®æŸ¥è¯¢è°ƒæ•´
- æ€»æ˜¯æ‰§è¡Œæ‰€æœ‰æ­¥éª¤
- æ— æ³•å¤„ç†æ„å¤–æƒ…å†µ
- æ²¡æœ‰æ¨ç†èƒ½åŠ›

### âœ… ReAct æ–¹æ³•

```typescript
// Agent æ ¹æ®éœ€è¦åŠ¨æ€å†³å®š
async function analyzeWithReAct(query) {
  const agent = createAgent({ tools, model });

  // Agent å†…éƒ¨ä¼š:
  // 1. ç†è§£ query
  // 2. å†³å®šéœ€è¦å“ªäº›ä¿¡æ¯
  // 3. åªè°ƒç”¨å¿…è¦çš„å·¥å…·
  // 4. æ ¹æ®ç»“æœå†³å®šä¸‹ä¸€æ­¥

  return await agent.execute(query);
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… æ™ºèƒ½å†³ç­–
- âœ… åªæ‰§è¡Œå¿…è¦æ­¥éª¤
- âœ… å¯ä»¥é€‚åº”ä¸åŒæŸ¥è¯¢
- âœ… å¯ä»¥å¤„ç†å¤æ‚æƒ…å†µ

## åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­æŸ¥çœ‹ ReAct Loop

### å¯ç”¨ Verbose æ¨¡å¼

```typescript
// src/langchain/agents/ResearchAgent.ts
const agent = createResearchAgent({
  verbose: true  // å¯ç”¨è¯¦ç»†æ—¥å¿—
});

// ä½ ä¼šçœ‹åˆ°:
// [ResearchAgent] Starting invoke
// [ResearchAgent] Tool call: competitor_research
// [ResearchAgent] Tool result: {...}
// [ResearchAgent] Tool call: market_size_research
// [ResearchAgent] Tool result: {...}
// [ResearchAgent] Invoke complete
```

### æŸ¥çœ‹æ‰§è¡Œæ­¥éª¤

```typescript
const result = await agent.execute(input, context);

// result.steps åŒ…å«æ‰€æœ‰å·¥å…·è°ƒç”¨
result.steps.forEach(step => {
  console.log(`${step.stepNumber}. ${step.action}`);
  console.log(`   Input: ${JSON.stringify(step.input)}`);
});

// è¾“å‡º:
// 1. competitor_research
//    Input: { industry: "coffee", region: "US" }
// 2. market_size_research
//    Input: { market: "coffee shops" }
```

## å…³é”®æœ¯è¯­æ€»ç»“

| æœ¯è¯­ | å«ä¹‰ | åœ¨ä»£ç ä¸­ |
|------|------|----------|
| **ReAct Loop** | æ¨ç†-è¡ŒåŠ¨-è§‚å¯Ÿå¾ªç¯ | `agent.invoke()` å†…éƒ¨é€»è¾‘ |
| **Reasoning** | Agent æ€è€ƒä¸‹ä¸€æ­¥ | LangChain çš„ model æ¨ç† |
| **Acting** | Agent è°ƒç”¨å·¥å…· | `tool.invoke()` |
| **Observing** | Agent æ¥æ”¶ç»“æœ | Tool è¿”å›å€¼ |
| **Tool Use** | ä½¿ç”¨å·¥å…·æ‰§è¡ŒåŠ¨ä½œ | Agent è°ƒç”¨ tools |
| **Iteration** | ä¸€æ¬¡å®Œæ•´çš„å¾ªç¯ | `result.metadata.iterationsUsed` |
| **Max Iterations** | æœ€å¤§å¾ªç¯æ¬¡æ•° | `config.maxIterations` |

## å®é™…è¿è¡Œç¤ºä¾‹

```bash
# è¿è¡Œ demo æŸ¥çœ‹ ReAct loop
pnpm dev

# ä½ ä¼šçœ‹åˆ°:
# ğŸ“‹ Demo 1: Basic Research Query
#
# ğŸ’¬ User: What are the key competitors...
#
# [Agent å†…éƒ¨æ‰§è¡Œ ReAct loop]
# Iteration 1: è°ƒç”¨ competitor_research
# Iteration 2: è°ƒç”¨ market_size_research
# Iteration 3: ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ
#
# ğŸ“Š Result: ...
# ğŸ”„ Steps taken: 2
# ğŸ”§ Tools used: competitor_research, market_size_research
```

## è¿›é˜¶ï¼šSub-Agent ä¸­çš„ Nested ReAct Loop

å½“ä½ ä½¿ç”¨ Sub-Agent Tool æ—¶ï¼Œä¼šæœ‰**åµŒå¥—çš„ ReAct loop**ï¼š

```
Main Agent (ReAct Loop)
  â”œâ”€ Iteration 1: å†³å®šä½¿ç”¨ competitor_research_subagent tool
  â”‚
  â””â”€ Sub-Agent (å†…éƒ¨çš„ ReAct Loop)
      â”œâ”€ Iteration 1: å†³å®šä½¿ç”¨ web_search tool
      â”œâ”€ Iteration 2: å†³å®šä½¿ç”¨ data_analysis tool
      â”œâ”€ Iteration 3: å†æ¬¡ä½¿ç”¨ web_search
      â””â”€ Return: ç»¼åˆæŠ¥å‘Š

  â”œâ”€ Main Agent æ¥æ”¶ sub-agent çš„ç»“æœ
  â””â”€ Iteration 2: ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ
```

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Sub-Agent æ¨¡å¼å¦‚æ­¤å¼ºå¤§ - å®ƒå¯ä»¥è‡ªä¸»åœ°æ‰§è¡Œå¤æ‚çš„å¤šæ­¥éª¤ç ”ç©¶ï¼

## æ€»ç»“

**Tool Use in the ReAct Loop** çš„æ ¸å¿ƒï¼š

1. âœ… **Agent é€šè¿‡æ¨ç†å†³å®šä½¿ç”¨å“ªä¸ªå·¥å…·**
2. âœ… **å·¥å…·æ‰§è¡Œå…·ä½“åŠ¨ä½œå¹¶è¿”å›ç»“æœ**
3. âœ… **Agent è§‚å¯Ÿç»“æœå¹¶å†³å®šä¸‹ä¸€æ­¥**
4. âœ… **å¾ªç¯é‡å¤ç›´åˆ°ä»»åŠ¡å®Œæˆ**

è¿™è®© AI Agent èƒ½å¤Ÿï¼š
- ğŸ¯ è‡ªä¸»è§„åˆ’ä»»åŠ¡æ‰§è¡Œ
- ğŸ”§ åŠ¨æ€é€‰æ‹©å’Œä½¿ç”¨å·¥å…·
- ğŸ”„ æ ¹æ®ä¸­é—´ç»“æœè°ƒæ•´ç­–ç•¥
- ğŸ¤– åƒäººç±»ä¸€æ ·æ€è€ƒå’Œè¡ŒåŠ¨

åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼ŒLangChain çš„ `createAgent()` è‡ªåŠ¨å®ç°äº†è¿™ä¸ª ReAct loopï¼Œæˆ‘ä»¬åªéœ€è¦æä¾› tools å’Œ modelï¼
